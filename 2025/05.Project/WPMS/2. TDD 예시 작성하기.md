### 1. Service Layer 테스트

##### 1. (RED) 우선 실패하는 테스트 코드를 작성.
![[TDD_01.png]]
![[TDD_02.png]]
아무것도 구현되어있지 않고 테스트 코드만 작성한다.

##### 2. (Red -> Green, 반복) 테스트 코드를 성공시키기 위한 실제 코드 작성
![[TDD_03.png]]
![[TDD_04.png]]
테스트 코드 검증에 필요한 클래스와 메서드를 작성했으므로 테스트 코드에서 컴파일 오류가 나지 않는다.    
하지만, 테스트 코드를 실행시켜보면 FAIL로 떨어진다. => 비즈니스 로직을 아직 작성하지 않음.
![[TDD_05.png]]

GREE(PASS)가 떨어질 때 까지 반복하여 비즈니스로직을 작성한다.
![[TDD_06.png]]

##### 3. (Green -> Yellow) 통과한 코드의 리팩터링을 진행한다.
중복 코드 제거, 일반화 등의 리팩터링을 진행.


### 2. Repository Layer 테스트
___※JPA 환경이 아닌 MyBatis 환경___
##### 1. (RED) 우선 실패하는 테스트 코드를 작성.
인데, service layer에서 이미 작성한 내용과 중복됨
![[TDD_07.png]]
![[TDD_08.png]]
애초에 XML 파일도 작성하지 않았으므로 binding 오류 발생
##### 2. (Red -> Green, 반복) 테스트 코드를 성공시키기 위한 실제 코드 작성
XML 파일 작성 및 schema.sql 같이 작성
```schema.sql
CREATE TABLE tb_employee (  
                             employee_id INT PRIMARY KEY AUTO_INCREMENT,  
                             name VARCHAR(50),  
                             hire_date VARCHAR(8),  
                             position VARCHAR(20),  
                             skill_level VARCHAR(20),  
                             password VARCHAR(200),  
                             initial_pw_changed BOOLEAN DEFAULT FALSE,  
                             user_role VARCHAR(20),  
                             created_by VARCHAR(50),  
                             created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  
                             updated_by VARCHAR(50),  
                             updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP  
);
```

이후 실행되는 RED를 하나씩 해결
![[TDD_09.png]]
green
##### 3. (Green -> Yellow) 통과한 코드의 리팩터링을 진행한다.