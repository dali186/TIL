##### 0.Docker용 사용자 생성
- Linux 사용자 생성
	`useradd -m -s /bin/bash dockerusr`
- 비밀번호 설정
	`passwd dockerusr`
- 그룹 추가
	`usermod -aG docker dockerusr`
### 1. Gitea 구축
##### 1. docker-compose.yml 작성 및 실행
```bash
mkdir /docker/gitea
cd /docker/gitea
vi /docker/gitea docker-compose.yml
```
```docker-compose.yml
version: '3'

services:
  gitea:
    container_name: gitea
    image: gitea/gitea:latest
    restart: always
    volumes:
      - gitea-data:/data
    ports:
      - "3000:3000"
      - "222:22"
    environment:
      - GITEA__database__DB_TYPE=mysql
      - GITEA__database__HOST=mysql:3306
      - GITEA__database__NAME=gitea
      - GITEA__database__USER=gitea
      - GITEA__database__PASSWD=gitea
    networks:
      - gitea
    depends_on:
      - mysql

  mysql:
    image: mysql:latest
    restart: always
    environment:
      - MYSQL_USER=gitea
      - MYSQL_ROOT_PASSWORD=gitea
      - MYSQL_PASSWORD=gitea
      - MYSQL_DATABASE=gitea
    networks:
      - gitea
    volumes:
      - mysql-data:/var/lib/mysql

networks:
  gitea:
    driver: bridge
    external: false

volumes:
  gitea-data:
    driver: local
  mysql-data:
    driver: local

```
```bash
docker-compose up -d
```
*ISSUE : docker stop 시 permission denied 에러*
> **sudo aa-remove-unknown**

apparmor를 제거하는 명령어.
docker를 snap으로 설치하는 경우, AppArmor profile이 쌓이고 충돌이 나는 경우라고 함.

##### 2. Gitea 초기 구축
{hostIP}:3000 접속 후 초기 설정

### 2. Act-runner 구축
**[act-runner Doc](https://docs.gitea.com/usage/actions/act-runner)
##### 1. act-runner 패키지 pull 후 config.yml 파일 extract
```bash
docker pull docker.io/gitea/act_runner:latest # for the latest stable release
docker run --entrypoint="" --rm -it docker.io/gitea/act_runner:latest act_runner generate-config > config.yml
```
