---
published: 2025-05-19 15:19:52
lastModified: 2025-05-19 15:19:50
path: 04.Infrastructure/01.Cloud/02.AWS
category: Cloud
description: IAM의 기본 이해
tags:
  - Cloud
  - AWS
---
### IAM(Identity and Access Management)
1. AWS 계정에 대한 공유 엑세스
2. 세분화된 권한 부여
3. Multi Factor 인증(MFA)
4. Identity Federation

### 사용자(Users), 그룹(Groups), 역할(Roles), 정책(Policy)
1. 사용자
	- 사용자는 자격증명(Credentials)을 갖는 최소 단위.
	- AWS를 사용하는 개인이나 서비스를 나타냄.
	- 각 사용자는 하나의 AWS 계정에서만 파생된다.
	- 각 사용자마다 권한정책을 적용할 수 있다.
2. 그룹
	- 사용자들을 논리적으로 묶은 단위.
	- 그룹 별로 정책을 지정할 수 있다.
		- 정책은 사용자 개별의 정책으로도 연결됨.
3. 정책
	- AWS에서 권한을 정의하는 JSON 문서.
	- 특정 리소스에 대한 액세스를 허용하거나 거부하는 규칙을 정의.
	```JSON
	{
		"Version": "2025-05-19",
		"Statement": [
			{
				"Effect": "Allow",
				"Action": ["s3:GetObject", "s3:PutObject"],
				"Resource": "arn:aws:s3:::example-bucket/*"
			}
		]
	}
	```
	- Effect
		- Allow(허용), Deny(거부) 두 개의 값만을 가짐.
		- 특정 작업을 허용할지 거부할지 결정.
	- Action
		- 수행할 작업을 정의.
	- Resource
		- 작업이 적용되는 특정 AWS 리소스를 지정.
		- ARN(Amazon Resource Name)을 사용하여 리소스 식별.
	- 권한
		- 서비스 엑세스 권한 수준을 구체적으로 지정.
4. 역할 (Roles)
	- 사람이 아닌 AWS 서비스, 외부 사용자, 다른 AWS 계정 등에게 권한을 위임하기 위한 임시 권한 부여 수단.
	- 역할 자체도 정책을 연결하여 권한을 정의하지만, IAM 사용자처럼 자격 증명을 가지지 않음.
	- 특정 주체가 역할을 AssumeRole(맡는 행위) 하여 권한을 일시 획득.
	- 예) EC2 인스턴스가 S3에 접근할 때 EC2에 역할을 부여하거나, 크로스 계정 접근 시 역할 사용.

**역할(Roles)에 대한 추가 이해**
역할 == 임시 보안 자격 증명(Temporary Security Credentials)
즉, 특정 사용자에게 정책을 부여했다가 회수하는 것과 동일한 의미.
보안성과 관리 편의성 측면에서 역할 + 임시 자격증명 방식을 사용한다.

##### 총 정리
어느 회사의 개발팀이 클라우드 사용을 위해 A라는 계정을 만들었다. 
회사에 개발팀은 개발 1팀, 개발 2팀, 개발 3팀이 존재했고, 
각 개발팀 마다 FE, BE, INFRA 이렇게 존재했다고 했을 때, 
IAM 그룹을 DEV1, DEV2, DEV3, FE1, FE2, FE3, BE1, BE2, BE3, INFRA1, INFRA2, INFRA3으로 나눌 수 있다.

FE에게는 거의 접근을 할 수 없는 정책을 주고, BE한테는 중간 정도의 정책을, INFRA한테는 모든 정책을 설정했다. 
그룹 또는 개별 사용자에게 부여할 수 있다. 
S3 서비스의 권한 정책은 INFRA 그룹에게만 존재했고, 
그 중 DEV2 팀만 EC2 인스턴스에 관련한 정책을 가지고 있었다고 했을 때, 
DEV 3팀의 INFRA 개발자 A가 EC2 인스턴스를 작업해야할 일이 발생했을 때, 
정책을 수정하지 않고 EC2인스턴스에 대한 역할을 생성하여 A에게 전달해서 작업하도록 할 수 있다. 
또한 DEV1팀의 BE 개발자들이 S3 버킷을 설정할 일 이 생기면 INFRA 팀에서 역할을 생성하여 BE에게 전달해주면 된다.

###### GPT 피드백
## 🏢 조직 구조 예시: 총 정리

### ✅ 1. 계정 구조

- 회사는 AWS 계정 `A`를 생성 (조직 내 유일한 루트 계정)
    
- 모든 IAM 사용자, 그룹, 리소스는 이 계정 내에서 관리됨
    

---

### ✅ 2. IAM 사용자/그룹 구성

|개발팀|그룹 구분|그룹 이름 예시|역할 및 권한 수준|
|---|---|---|---|
|DEV1|FE|`FE1`|거의 없음 (읽기 전용 등 제한적)|
||BE|`BE1`|중간 수준의 권한|
||INFRA|`INFRA1`|모든 AWS 리소스에 대한 권한|
|DEV2|FE/BE/INFRA|`FE2`, `BE2`, `INFRA2`|역할 동일|
|DEV3|FE/BE/INFRA|`FE3`, `BE3`, `INFRA3`|역할 동일|

- 각 그룹에 **정책(Policy)** 을 할당하여 접근 범위를 제한
    
- 사용자들은 하나 이상의 그룹에 소속될 수 있음
    
- 정책은 그룹 또는 개별 사용자에게 직접 부여 가능
    

---

### ✅ 3. S3와 EC2 권한 분배

|리소스|접근 허용 대상 그룹|
|---|---|
|S3|INFRA1, INFRA2, INFRA3|
|EC2|INFRA2 (DEV2의 인프라팀만 가능)|

---

### ✅ 4. 예외 상황 해결 – 역할(Role)을 통한 임시 권한 위임

#### 상황 1: DEV3의 INFRA 개발자 A가 EC2 작업 필요

- `EC2FullAccessRole` 역할 생성
    
- 해당 역할에 `EC2FullAccess` 정책 부착
    
- 역할의 신뢰 정책에 **개발자 A의 ARN을 허용**
    
- A는 `AssumeRole` API를 호출하여 임시로 EC2 권한 획득
    
- **정책 변경 없이 작업 가능**, 작업 완료 후 권한 자동 만료
    

#### 상황 2: DEV1의 BE 팀이 S3 설정 작업 필요

- `S3ConfigTempRole` 역할 생성
    
- `s3:PutBucketPolicy`, `s3:GetBucket*` 등 필요한 정책 부착
    
- 신뢰 정책에 `BE1` 사용자 또는 그룹의 ARN 포함
    
- 해당 역할을 Assume하여 **S3 설정 가능**
    

---

## 🔐 이 방식의 장점

| 항목                  | 효과                                     |
| ------------------- | -------------------------------------- |
| **권한 최소화 원칙 적용**    | 평상시에는 최소 권한만 유지                        |
| **역할을 통해 권한 임시 위임** | 필요한 순간에만 권한 부여 (시간 제한 가능)              |
| **감사 및 추적 가능성 증가**  | AssumeRole 로그로 누가 언제 어떤 역할을 맡았는지 확인 가능 |
| **관리 부담 최소화**       | 정책을 사용자마다 직접 수정할 필요 없음                 |
